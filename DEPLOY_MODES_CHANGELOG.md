# Changelog: –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è + –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ Spark KV –≤ Bitrix

## –î–∞—Ç–∞: 2025-01-XX

## –¶–µ–ª—å

–†–∞–∑–¥–µ–ª–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Ä–µ–∂–∏–º–∞:
1. **DEMO** - –¥–ª—è Spark —Å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–º–∏ –∏ Spark KV
2. **BITRIX** - –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –≤ iframe –±–µ–∑ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ `/_spark/*`

---

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `src/services/configStore.ts` ‚≠ê –ö–õ–Æ–ß–ï–í–û–ô

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `DEMO_OFFERS` —Å –¥–µ–º–æ —Ç–æ—Ä–≥–æ–≤—ã–º–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏
- –ü–æ–ª–µ `initialized` –≤ `BitrixConfigStore` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è INIT
- –ú–µ—Ç–æ–¥ `isInitialized()` –≤ `BitrixConfigStore`
- –§—É–Ω–∫—Ü–∏—è `getAppMode(): 'DEMO' | 'BITRIX'`
- –§—É–Ω–∫—Ü–∏—è `getDemoOffers()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ–º–æ-–æ—Ñ—Ñ–µ—Ä–æ–≤
- –¢–∏–ø—ã `AppMode` –∏ `OffersSource`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –≤ `getDeployTarget()`

**–ò–∑–º–µ–Ω–µ–Ω–æ:**
- `SparkConfigStore` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `loadSparkKV()` –¥–ª—è –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ Spark KV (–º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –≤–∫–ª—é—á–µ–Ω–∏–µ –≤ BITRIX bundle)
- `BitrixConfigStore.setInitData()` —Ç–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ INIT
- `getDeployTarget()` —Ç–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Ä–µ–∂–∏–º —á–µ—Ä–µ–∑ `console.info('[MODE]', ...)`
- –£–ª—É—á—à–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–µ—Ñ–æ–ª—Ç–æ–≤ –≤ `BitrixConfigStore`

**–ó–∞—á–µ–º:**
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å Spark KV –æ—Ç BITRIX —Ä–µ–∂–∏–º–∞
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –¥–ª—è DEMO —Ä–µ–∂–∏–º–∞
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Ä–µ–∂–∏–º–æ–≤

---

### 2. `src/App.tsx` ‚≠ê –ö–õ–Æ–ß–ï–í–û–ô

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- State `appMode: AppMode` - —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- State `offersSource: OffersSource` - –∏—Å—Ç–æ—á–Ω–∏–∫ –æ—Ñ—Ñ–µ—Ä–æ–≤ (DEMO –∏–ª–∏ INIT)
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `selectedOffers` —Å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–º–∏ –≤ DEMO —Ä–µ–∂–∏–º–µ
- –§—É–Ω–∫—Ü–∏—è `handleSimulateInit()` - —Å–∏–º—É–ª—è—Ü–∏—è INIT –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–µ–∂–∏–º–∞ (fixed top-right) —Å:
  - MODE: DEMO | BITRIX
  - OFFERS: DEMO | INIT
  - –ö–Ω–æ–ø–∫–∞ "Simulate INIT" (—Ç–æ–ª—å–∫–æ –≤ DEMO —Ä–µ–∂–∏–º–µ)
- pwcode `btn-simulate-init` –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Å–∏–º—É–ª—è—Ü–∏–∏

**–ò–∑–º–µ–Ω–µ–Ω–æ:**
- useEffect –¥–ª—è INIT —Ç–µ–ø–µ—Ä—å:
  - –õ–æ–≥–∏—Ä—É–µ—Ç `[INIT] received` —Å payload
  - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `offersSource` –≤ 'INIT'
  - –õ–æ–≥–∏—Ä—É–µ—Ç `[INIT] applied offers=` —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
- –ò–º–ø–æ—Ä—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω—ã `getAppMode`, `getDemoOffers`, `AppMode`, `OffersSource`

**–ó–∞—á–µ–º:**
- –í–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º –∏ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
- –î–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å INIT –±–µ–∑ Bitrix backend
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

### 3. `src/hooks/use-config-kv.ts`

**–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**, –Ω–æ —Ç–µ–ø–µ—Ä—å hook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é ConfigStore —á–µ—Ä–µ–∑ —Ñ–∞–±—Ä–∏–∫—É.

**–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- –í DEMO —Ä–µ–∂–∏–º–µ ‚Üí SparkConfigStore ‚Üí –∑–∞–ø—Ä–æ—Å—ã –∫ `/_spark/*`
- –í BITRIX —Ä–µ–∂–∏–º–µ ‚Üí BitrixConfigStore ‚Üí in-memory, NO –∑–∞–ø—Ä–æ—Å–æ–≤

---

## –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### 4. `DEPLOY_MODES.md` üìò –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ:
- –û–ø–∏—Å–∞–Ω–∏—é –¥–≤—É—Ö —Ä–µ–∂–∏–º–æ–≤ (DEMO vs BITRIX)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é —Ä–µ–∂–∏–º–∞ (env —Ñ–ª–∞–≥–∏, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã)
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è Spark KV
- –ü—Ä–æ—Ç–æ–∫–æ–ª—É INIT
- –í–∏–∑—É–∞–ª—å–Ω–æ–º—É –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—É
- Build –∫–æ–º–∞–Ω–¥–∞–º
- Troubleshooting
- Checklist –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ Spark KV –≤ BITRIX

**1. Build-time –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞:**
```bash
VITE_DEPLOY_TARGET=bitrix npm run build
```

**2. Runtime –≤—ã–±–æ—Ä ConfigStore:**
```typescript
const store = getConfigStore() 
// ‚Üí –µ—Å–ª–∏ VITE_DEPLOY_TARGET=bitrix ‚Üí BitrixConfigStore
// ‚Üí –∏–Ω–∞—á–µ ‚Üí SparkConfigStore
```

**3. SparkConfigStore –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏:**
```typescript
async function loadSparkKV() {
  if (typeof window !== 'undefined' && window.spark?.kv) {
    return window.spark.kv
  }
  return null
}
```

**4. BitrixConfigStore - –ø–æ–ª–Ω–æ—Å—Ç—å—é in-memory:**
```typescript
class BitrixConfigStore {
  private storage: Map<string, any> = new Map()
  private defaults: Record<string, any> = {...}
  
  async get(key) { return this.storage.get(key) || this.defaults[key] }
  async set(key, value) { this.storage.set(key, value) }
  // –ù–ï–¢ fetch(), –ù–ï–¢ window.spark
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –í BITRIX build –ù–ï–¢ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç `fetch('/_spark/*')`
- –í—Å–µ –¥–µ—Ñ–æ–ª—Ç—ã –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏ –¥–æ SAVE_REQUEST

---

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç DEMO —Ä–µ–∂–∏–º

**1. –°—Ç–∞—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
```typescript
const [selectedOffers] = useState(() => {
  return appMode === 'DEMO' ? getDemoOffers() : []
})
```

**2. –î–µ–º–æ-–æ—Ñ—Ñ–µ—Ä—ã:**
```typescript
DEMO_OFFERS = [
  { id: 999, name: "–î–µ–º–æ –¢–ü: A4", ... },
  { id: 1000, name: "–î–µ–º–æ –¢–ü: A5", ... }
]
```

**3. –ö–Ω–æ–ø–∫–∞ "Simulate INIT":**
```typescript
{appMode === 'DEMO' && offersSource === 'DEMO' && (
  <Button onClick={handleSimulateInit}>
    Simulate INIT
  </Button>
)}
```

**4. –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç mock INIT payload:**
- –ó–∞–º–µ–Ω—è–µ—Ç –¥–µ–º–æ-–æ—Ñ—Ñ–µ—Ä—ã –Ω–∞ —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `offersSource = 'INIT'`
- –õ–æ–≥–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç toast

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í DEMO —Ä–µ–∂–∏–º–µ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã
- –ú–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å INIT –±–µ–∑ Bitrix
- –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –≤–µ—Å—å flow

---

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### Console logs (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ)

**–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
```
[MODE] DEMO
```
–∏–ª–∏
```
[MODE] BITRIX
```

**–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ INIT (BITRIX —Ä–µ–∂–∏–º –∏–ª–∏ —Å–∏–º—É–ª—è—Ü–∏—è):**
```
[INIT] received {mode: "NEW_CONFIG", context: {...}, ...}
[INIT] applied offers= 1
```

**–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ BitrixConfigStore:**
```
[BitrixConfigStore] INIT data applied
```

---

## –í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** Fixed div –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É App.tsx

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```tsx
<div className="fixed top-2 right-2 z-50">
  <div className="bg-card border rounded-lg px-3 py-1.5 shadow-lg">
    <span>MODE: {DEMO|BITRIX}</span>
    <span>OFFERS: {DEMO|INIT}</span>
  </div>
  
  {/* –¢–æ–ª—å–∫–æ –≤ DEMO —Ä–µ–∂–∏–º–µ –∏ OFFERS: DEMO */}
  <Button onClick={handleSimulateInit}>
    Simulate INIT
  </Button>
</div>
```

**–¶–≤–µ—Ç–∞:**
- MODE: BITRIX ‚Üí `text-accent`
- MODE: DEMO ‚Üí `text-primary`
- OFFERS: INIT ‚Üí `text-success`
- OFFERS: DEMO ‚Üí `text-muted-foreground`

---

## pwcode –∞—Ç—Ä–∏–±—É—Ç—ã

**–ù–æ–≤—ã–µ:**
- `pwcode="btn-simulate-init"` - –∫–Ω–æ–ø–∫–∞ —Å–∏–º—É–ª—è—Ü–∏–∏ INIT –≤ DEMO —Ä–µ–∂–∏–º–µ

**–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ:** –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## Testing checklist

### DEMO —Ä–µ–∂–∏–º (npm run dev)

- [x] MODE: DEMO –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [x] OFFERS: DEMO –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [x] 2 –¥–µ–º–æ-–æ—Ñ—Ñ–µ—Ä–∞ –≤ —Ñ—É—Ç–µ—Ä–µ
- [x] –ö–Ω–æ–ø–∫–∞ "Simulate INIT" –≤–∏–¥–Ω–∞
- [x] –ü–æ—Å–ª–µ –∫–ª–∏–∫–∞ "Simulate INIT":
  - [x] OFFERS: INIT
  - [x] 1 —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ñ—Ñ–µ—Ä
  - [x] Toast "INIT —Å–∏–º—É–ª—è—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞"
  - [x] Console: `[INIT] Simulated`, `[INIT] applied offers= 1`
- [x] –ó–∞–ø—Ä–æ—Å—ã –∫ `/_spark/kv/*` –≤ Network (—Ä–∞–∑—Ä–µ—à–µ–Ω—ã)

### BITRIX —Ä–µ–∂–∏–º (VITE_DEPLOY_TARGET=bitrix npm run build)

- [ ] MODE: BITRIX –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] OFFERS: DEMO –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ)
- [ ] –ö–Ω–æ–ø–∫–∏ "Simulate INIT" –ù–ï–¢
- [ ] –í Network –ù–ï–¢ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ `/_spark/*`
- [ ] –í Console –ù–ï–¢ –æ—à–∏–±–æ–∫ "Failed to set default value for key"
- [ ] Console: `[MODE] BITRIX`
- [ ] –ü–æ—Å–ª–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ INIT –æ—Ç Bitrix:
  - [ ] OFFERS: INIT
  - [ ] Console: `[INIT] received`, `[INIT] applied offers=N`
  - [ ] –û—Ñ—Ñ–µ—Ä—ã –∑–∞–º–µ–Ω–∏–ª–∏—Å—å –Ω–∞ –¥–∞–Ω–Ω—ã–µ –∏–∑ INIT

---

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚úÖ **DEMO —Ä–µ–∂–∏–º (Spark):**
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏ –∫–Ω–æ–ø–∫–∞ —Å–∏–º—É–ª—è—Ü–∏–∏

‚úÖ **BITRIX —Ä–µ–∂–∏–º:**
- –ù–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ DEMO —Ä–µ–∂–∏–º
- –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É feature flag

---

## Known issues / Limitations

1. **–°–∏–º—É–ª—è—Ü–∏—è INIT –≤ DEMO —Ä–µ–∂–∏–º–µ:**
   - –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É payload (–±–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è)
   - Hardcoded mock –¥–∞–Ω–Ω—ã–µ (–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å)

2. **BitrixConfigStore:**
   - In-memory —Ç–æ–ª—å–∫–æ (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞–º–∏)
   - –≠—Ç–æ OK, —Ç.–∫. –≤ BITRIX —Ä–µ–∂–∏–º–µ –≤—Å—ë –¥–æ–ª–∂–Ω–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∏–∑ INIT

3. **–í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä:**
   - Always visible (–º–æ–∂–Ω–æ —Å–∫—Ä—ã—Ç—å –≤ production, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
   - –ó–∞–Ω–∏–º–∞–µ—Ç –ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª (–º–æ–∂–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç)

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –í–Ω–µ–¥—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (DEPLOY_MODES.md)
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Å–∏–º—É–ª—è—Ü–∏—é INIT
5. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å DEMO —Ä–µ–∂–∏–º
6. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å BITRIX —Ä–µ–∂–∏–º —Å —Ä–µ–∞–ª—å–Ω—ã–º backend
7. ‚è≥ –°–æ–±—Ä–∞—Ç—å BITRIX build –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Network/Console
8. ‚è≥ –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –≤ Bitrix —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ä–µ–¥—É

---

## –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

- **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ä–µ–∂–∏–º–æ–≤:** `DEPLOY_MODES.md`
- **–ü—Ä–æ—Ç–æ–∫–æ–ª postMessage:** `POSTMESSAGE_API.md`
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Bitrix:** `docs/bitrix-integration.md`
- **–û–±—â–∏–π README:** `README.md`

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã / –í–æ–ø—Ä–æ—Å—ã

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Ä–µ–∂–∏–º–∞–º–∏:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `console.info('[MODE]', ...)` –≤ Console
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Network –Ω–∞ –Ω–∞–ª–∏—á–∏–µ `/_spark/*` –∑–∞–ø—Ä–æ—Å–æ–≤
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä (MODE/OFFERS)
4. –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ `DEPLOY_MODES.md` ‚Üí Troubleshooting

---

*Changelog —Å–æ–∑–¥–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–¥–∞—á–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è DEMO/BITRIX —Ä–µ–∂–∏–º–æ–≤*
